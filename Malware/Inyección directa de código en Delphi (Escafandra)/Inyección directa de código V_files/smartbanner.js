function Tapatalk_Banner_Init(){var os=Tapatalk_Banner_OsDetect();var app_sharelink=Tapatalk_Banner_BuildShareLink();if(app_sharelink!==null&&os!==''&&Tapatalk_Banner_ShouldShow()){var bannerHtml=`
<div id="TapatalkBanner_Container" class="TapatalkBanner_Container">
<style>
.TapatalkBanner_Container
{
    font-family: helvetica,arial,sans-serif;
    font-size: 13px;
}
.TapatalkBanner a,.TapatalkBanner a:active,.TapatalkBanner a:link,.TapatalkBanner a:visited {
    text-decoration: none;
    color: #0079d3;
}

.TapatalkBanner__overlay {
    top: 0;
    background-color: #000;
    height: 100%;
    z-index: 0;
    opacity: 0
}

.TapatalkBanner__content,.TapatalkBanner__overlay {
    left: 0;
    position: fixed;
    width: 100%;
    pointer-events: none
}

.TapatalkBanner__content {
    background-color: #fff;
    z-index: 999;
    height: 110px;
    bottom: -200px;
    transition: bottom .5s
}

.TapatalkBanner__actionButton {   
    font-weight: 600 !important;
    line-height: 32px;
    text-align: center;
    color: #0079d3 !important;
    margin-top: 4px;
    height: 32px;
    width: 102px;
    border-radius: 5px;
    border: 1px solid #0079d3;
    cursor: pointer;
    font-size: 10px;
    padding: 5px;
}

.active .TapatalkBanner__overlay {
    z-index: 30;
    opacity: .5;
    pointer-events: all
}

.active .TapatalkBanner__content {
    z-index: 999;
    bottom: 0;
    pointer-events: all
}

.TapatalkBanner__graph {
    margin-top: 22px;
    margin-left: 10px;
    width: 25%;
    display: inline-block;
    text-align: right;
}

.BannerGraphIcon {
    border-radius: 5px;
    border: 1px solid #aaa;
    width: 64px;
    height: 64px;
}

.TapatalkBanner__desc {
    width: 65%;
    display: inline-block;
    float: right;
    padding-right: 5%;
}

.TapatalkBanner__desc_title{
    font-size: 14px;
    font-weight: bolder;
    padding-left: 15px;
    line-height: 18px;
    margin-top: 20px;
    color:#000;
}

.TapatalkBanner__desc_open {
    text-align: left;
    padding-left: 15px;
    padding-top: 3px;
}

.TapatalkBanner__close_button{
    width: 40px;
    height: 30px;
    font-size: 20px;
    position: absolute;
    right: 0px;
    top: 0px;
    color: #aaa;
}

</style>
<div class="TapatalkBanner active">
  <div class="TapatalkBanner__overlay"></div>
  <div class="TapatalkBanner__content">
        <div class="TapatalkBanner__graph">
            <img src="https://groups.tapatalk-cdn.com/static/image/logo-120x120.png" class="BannerGraphIcon">
        </div>
        <div class="TapatalkBanner__desc">
            <button class="TapatalkBanner__close_button" type="button" id="TapatalkBanner_Button_Continue" > Ã— </button>
            <div class="TapatalkBanner__desc_title">Open in Tapatalk App<br>Enjoy better experience</div>
            <div class="TapatalkBanner__desc_open"><a href="`+app_sharelink+`"><span id="TapatalkBanner_Button_Open" class="TapatalkBanner__actionButton">OPEN IN APP</span></a></div>
        </div>
    </div>
   </div>
   </div>
       `;document.write(bannerHtml);document.getElementById("TapatalkBanner_Button_Continue").addEventListener("click",function(){Tapatalk_Banner_SetShown();Tapatalk_Banner_Close();Tapatalk_Banner_Record_Event('clickcontinue');});document.getElementById('TapatalkBanner_Button_Open').addEventListener("click",function(){Tapatalk_Banner_Close();Tapatalk_Banner_Record_Event('clickopen');});Tapatalk_Banner_Record_Event('pv');}}
function Tapatalk_Banner_BuildShareLink(){var shareLink=null;if(typeof(app_sharelink_url)!=='undefined'&&typeof(app_sharelink_ttforumid)!=='undefined')
{shareLink="https://r.tapatalk.com/shareLink?campaign=smartbanner&url="+encodeURIComponent(app_sharelink_url);shareLink+="&share_fid="+app_sharelink_ttforumid;if(typeof(app_sharelink_location)!=='undefined'){switch(app_sharelink_location){case 'forum':{if(typeof(app_sharelink_fid)!=='undefined'){shareLink+="&share_sfid="+app_sharelink_fid+"&share_type=sf";}
break;}
case 'topic':{if(typeof(app_sharelink_tid)!=='undefined'){shareLink+="&share_tid="+app_sharelink_tid+"&share_type=t&link_source=smart_banner";shareLink=shareLink.replace(/\/shareLink\?/i,"/shareLink/topic?");}
break;}
case 'post':{if(typeof(app_sharelink_tid)!=='undefined'&&typeof(app_sharelink_pid)!=='undefined'){shareLink+="&share_tid="+app_sharelink_tid+"&share_pid="+app_sharelink_pid+"&share_type=p";}
break;}}}}
return shareLink;}
function Tapatalk_Banner_OsDetect(){if(navigator.userAgent.match(/iPhone|iPod/i)||navigator.userAgent.match(/iPad/i)){return 'ios';}
else if(navigator.userAgent.match(/Android/i)){return 'android';}
else if(navigator.userAgent.match(/IEMobile|Windows Phone/i)){return 'wp';}
return '';}
function Tapatalk_Banner_Close(){document.getElementById("TapatalkBanner_Container").remove();}
function Tapatalk_Banner_SetShown(){var currentDate=new Date();localStorage.setItem("TapatalkSmartbannerLastShown_"+app_sharelink_ttforumid,currentDate.getTime());}
function Tapatalk_Banner_ShouldShow(){var ONE_MINUTE=60*1000;var timelapse_to_show_again=(ONE_MINUTE*60*24)*7;var timelapse_to_show_first=ONE_MINUTE;var last_cache_key="TapatalkSmartbannerLastShown_"+app_sharelink_ttforumid;var first_cache_key="TapatalkSmartbannerFirstShown_"+app_sharelink_ttforumid;var lastShownTs=+localStorage.getItem(last_cache_key);var firstShownTs=+localStorage.getItem(first_cache_key);var currentDate=new Date();var firstShown=null;if(firstShownTs==null||isNaN(firstShownTs)||firstShownTs===0){firstShown=new Date(currentDate);localStorage.setItem(first_cache_key,firstShown.getTime());}else{firstShown=new Date(firstShownTs);}
if((firstShown.getTime()+timelapse_to_show_first)<currentDate.getTime()){var lastShown=null;if(!isNaN(lastShownTs)){lastShown=new Date(lastShownTs);}
if(lastShown==null||(lastShown.getTime()+timelapse_to_show_again)<currentDate.getTime()){return true;}}
return false;}
function Tapatalk_Banner_Record_Event(eventtype,cb){if(typeof(app_piwik_id)!=='undefined'){var xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(cb){cb();}}};var url='https://piwik.tapatalk.com/piwik.php?e_c=smartbanner&e_a='+eventtype+'&e_v=1&idsite='+app_piwik_id+'&rec=1&rand='+Date.now()+'&send_image=1&url='+encodeURIComponent(window.location.href);xmlhttp.open("GET",url,true);xmlhttp.send();}
else{if(cb){cb();}}}
Tapatalk_Banner_Init();